(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{272:function(t,s,a){t.exports=a.p+"assets/img/source_map.821469f1.png"},374:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("ul",[n("li",[n("strong",[t._v("plugins")])])]),n("p",[t._v("扩展webpack本身的一些功能，它们会运行在webpack的不同阶段（钩子/生命周期）")]),n("ul",[n("li",[t._v("插件的注册点\n当一个插件对象被注入到plugins列表中的时候，webpack会自动调用插件对象的一个固定方法（apply）来把任务（插件要做的事情）注入到指定的钩子中")])]),n("h2",{attrs:{id:"_1、html-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、html-webpack-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、html-webpack-plugin")]),n("ul",[n("li",[n("p",[t._v("在打包结束后，自动生成一个html文件，并把打包生成的js模块引入到该html中。以及解析DOM。")])]),n("li",[n("p",[n("code",[t._v("npm install --save-dev html-webpack-plugin")])])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("//webpack.config.js")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'my app'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'app.html'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      template"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./src/html/index.html'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("在 html 模板中，可以通过 <%=htmlWebpackPlugin.options.XXX%> 的方式获取配置的值")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("!")]),n("span",{attrs:{class:"token operator"}},[t._v("--")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{attrs:{class:"token operator"}},[t._v("--")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("!")]),n("span",{attrs:{class:"token constant"}},[t._v("DOCTYPE")]),t._v(" html"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("html lang"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"en"')]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("head"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("meta charset"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"UTF-8"')]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("meta name"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"viewport"')]),t._v(" content"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"width=device-width, initial-scale=1.0"')]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("meta http"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("equiv"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"X-UA-Compatible"')]),t._v(" content"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"ie=edge"')]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("title"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("%=")]),t._v("htmlWebpackPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),n("span",{attrs:{class:"token operator"}},[t._v("%")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("title"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("head"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("html"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("webpack"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("body"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("<")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("h3",{attrs:{id:"更多的配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更多的配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 更多的配置")]),n("ul",[n("li",[n("code",[t._v("title")]),t._v(": ⽤来生成⻚面的 title 元素")]),n("li",[n("code",[t._v("filename")]),t._v(": 输出的 HTML ⽂件名，默认是 index.html， 也可以直接配置子目录")]),n("li",[n("code",[t._v("template")]),t._v(": 模板⽂件路径，⽀持加载器（loader），⽐如 html!./index.html")]),n("li",[n("code",[t._v("inject")]),t._v(": true | 'head' | 'body' | false，注⼊所有的资源到特定的 template 或者 templateContent 中，如果设置为 body，所有的 javascript 资源将被放置到 body 元素的底部，true 或者 'head' 将放置到 head 元素中")]),n("li",[n("code",[t._v("favicon")]),t._v(": 添加特定的 favicon 路径到输出的 HTML 文件中")]),n("li",[n("code",[t._v("minify")]),t._v(": {} | false， 传递 html-minifier 选项给 minify 输出")]),n("li",[n("code",[t._v("hash")]),t._v(": true | false，如果为 true，将添加 webpack 编译生成的 hash 到所有包含的脚本和 CSS ⽂件，对于解除 cache 很有用")]),n("li",[n("code",[t._v("cache")]),t._v(": true | false，如果为 true，这是默认值，仅在文件修改之后才会发布文件")]),n("li",[n("code",[t._v("showErrors")]),t._v(": true | false，如果为 true，这是默认值，错误信息会写入到 HTML ⻚面中")]),n("li",[n("code",[t._v("chunks")]),t._v(": 允许只添加某些块 (⽐如，仅 unit test 块)")]),n("li",[n("code",[t._v("chunksSortMode")]),t._v(": 允许控制块在添加到⻚面之前的排序方式，⽀持的值:'none' | 'default' |{function}-default:'auto'")]),n("li",[n("code",[t._v("excludeChunks")]),t._v(": 允许跳过某些块，(⽐如，跳过单元测试的块)")])]),n("h2",{attrs:{id:"_2、clean-webpack-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、clean-webpack-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、clean-webpack-plugin")]),n("ul",[n("li",[t._v("删除（清理）构建目录")]),n("li",[n("code",[t._v("npm install --save-dev clean-webpack-plugin")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CleanWebpackPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'clean-webpack-plugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("CleanWebpackPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"_3、mini-css-extract-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、mini-css-extract-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" 3、mini-css-extract-plugin")]),n("ul",[n("li",[t._v("提取 CSS 到一个单独的文件中")]),n("li",[n("code",[t._v("npm install --save-dev mini-css-extract-plugin")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MiniCssExtractPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'mini-css-extract-plugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \trules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  \t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t\t\ttest"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.s[ac]ss$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t\t\tuse"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  \t\t\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t\t\t\t\tloader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MiniCssExtractPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader\n\t\t\t\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{attrs:{class:"token string"}},[t._v("'css-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{attrs:{class:"token string"}},[t._v("'sass-loader'")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\t\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \t"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),n("span",{attrs:{class:"token comment"}},[t._v("// filename: '[name].css' // 生成css文件在dist根目录")]),t._v("\n    \tfilename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'css/[name].css'")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 生成css文件在dist下的css目录")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"不能与style-loader共用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#不能与style-loader共用","aria-hidden":"true"}},[t._v("#")]),t._v(" 不能与style-loader共用")]),n("ul",[n("li",[t._v("使用mini-css-extract-plugin时，不能同时与style-loader同用，否则会报错")]),n("li",[t._v("mini-css-extract-plugin是将css单独抽离出来放到集中放到一个文件夹了，然后再通过link引入")]),n("li",[t._v("style-loader是将所有的样式合并成一个文件，然后再注入到style标签中引入")])]),n("h3",{attrs:{id:"样式文件中图片资源处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#样式文件中图片资源处理","aria-hidden":"true"}},[t._v("#")]),t._v(" 样式文件中图片资源处理")]),n("ul",[n("li",[t._v("通过背景样式引入的图片资源处理")])]),n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{attrs:{class:"token selector"}},[t._v("body")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v("background")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red "),n("span",{attrs:{class:"token url"}},[t._v("url('../images/logo.jpg')")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("配置url-loader的"),n("code",[t._v("publicPath")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.(png|jpe?g|gif)$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 以图片结尾的模块资源")]),t._v("\n  use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'url-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// // 满足 test 规则的资源所调用的 loader")]),t._v("\n    options"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'[name]_[hash].[ext]'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 占位符 [name] 源资源模块的名称 [ext]资源模块的后缀")]),t._v("\n      outputPath"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./images'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 打包后的存放位置")]),t._v("\n      publicPath"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'../images'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 打包后文件的 url (默认当前路径)")]),t._v("\n      limit"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("100")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"_4、sourcemap"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、sourcemap","aria-hidden":"true"}},[t._v("#")]),t._v(" 4、sourceMap")]),n("p",[t._v("我们实际运行在浏览器的代码是通过 webpack 打包合并甚至是压缩混淆过的代码，所生成的代码并不利于我们的调试和错误定位，我们可以通过 sourceMap 来解决这个问题，sourceMap 本质是一个记录了编译后代码与源代码的映射关系的文件，我们可以通过 webpack 的 devtool 选项来开启 sourceMap")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devtool"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'source-map'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("首先，编译后会为每一个编译文件生成一个对应的 .map 文件，同时在编译文件中添加一段对应的 map 文件引入代码")]),n("p",[t._v("同时，现代浏览器都能够识别 sourceMap 文件，如 chrome，会在 Sources 面板中显示根据编译文件与对应的 map 文件定位到源文件中，有利于我们的调试和错误定位")]),n("p",[n("img",{attrs:{src:a(272),alt:"img"}})]),n("h2",{attrs:{id:"_5、webpack-dev-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、webpack-dev-server","aria-hidden":"true"}},[t._v("#")]),t._v(" 5、webpack-dev-server")]),n("p",[t._v("每次的代码修改都需要重新编译打包，刷新浏览器，特别麻烦，我们可以通过安装 webpackDevServer 来改善这方面的体验")]),n("p",[n("code",[t._v("npm install --save-dev webpack-dev-server")])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 自动开启浏览器")]),t._v("\n  \topen"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 端口")]),t._v("\n  \tport"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("8081")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// https://webpack.docschina.org/configuration/dev-server/")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("启动服务以后，webpack 不在会把打包后的文件生成到硬盘真实目录中了，而是直接存在了内存中(同时虚拟了一个存放目录路径)，后期更新编译打包和访问速度大大提升")]),n("h3",{attrs:{id:"_5-1、proxy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1、proxy","aria-hidden":"true"}},[t._v("#")]),t._v(" 5-1、proxy")]),n("p",[t._v("当下前端的开发都是前后端分离开发的，前端开发过程中代码会运行在一个服务器环境下(如当前的 WebpackDevServer)，那么在处理一些后端请求的时候通常会出现跨域的问题。"),n("code",[t._v("WebpackDevServer")]),t._v(" 内置了一个代理服务，通过内置代理就可以把我们的跨域请求转发目标服务器上("),n("code",[t._v("WebpackDevServer")]),t._v(" 内置的代理发送的请求属于后端 - "),n("code",[t._v("node")]),t._v("，不受同源策略限制)，具体如下：")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'koa'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" KoaRouter "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'koa-router'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("Koa")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("KoaRouter")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrouter"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'/api/info'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("async")]),t._v(" ctx "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ctx"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        username"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'zMouse'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        gender"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'male'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" router"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("routes")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("listen")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("8787")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("axios")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  url"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'http://localhost:8787/api/info'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("then")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'res'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("默认情况下，该代码运行以后会出现跨域请求错误，修改"),n("code",[t._v("webpack")]),t._v(" 配置")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 生成的虚拟目录路径")]),t._v("\n  \tcontentBase"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./dist"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 自动开启浏览器")]),t._v("\n  \topen"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 端口")]),t._v("\n  \tport"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("8081")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \tproxy"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v("'/api'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      \ttarget"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'http://localhost:8787'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        pathRewrite"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token string"}},[t._v("'^/api'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("通过 "),n("code",[t._v("proxy")]),t._v(" 设置，当我们在当前 "),n("code",[t._v("WebpackDevServer")]),t._v(" 环境下发送以 "),n("code",[t._v("/api")]),t._v(" 开头的请求都会被转发到 "),n("code",[t._v("http://localhost:8787")]),t._v(" 目标服务器下")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// let xhr = new XMLHttpRequest()")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// xhr.open('get', '/api/info')")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// xhr.onload = function() {")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("//   console.log(xhr.responseText)")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// xhr.send()")]),t._v("\n\n"),n("span",{attrs:{class:"token function"}},[t._v("axios")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("//url: 'http://locahost:8081/api/info',")]),t._v("\n  url"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'/api/info'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("then")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'res'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("注意 "),n("code",[t._v("url")]),t._v(" 地址要填写 "),n("code",[t._v("WebpackDevServer")]),t._v(" 域，比如当前 "),n("code",[t._v("WebpackDevServer")]),t._v(" 开启的是 "),n("code",[t._v("http://localhost:8081")]),t._v("，也就是我们当前前端代码运行的环境，那么请求的 "),n("code",[t._v("url")]),t._v(" 也必须发送到这里，当我们的请求满足了 "),n("code",[t._v("proxy")]),t._v(" 中设置的 "),n("code",[t._v("/api")]),t._v(" 开头，那么就会把请求转发到 "),n("code",[t._v("target")]),t._v(" ，所以最后的实际请求是："),n("code",[t._v("http://lcoahost:8787/api/info")])]),n("h3",{attrs:{id:"_5-2、hot-module-replacement"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2、hot-module-replacement","aria-hidden":"true"}},[t._v("#")]),t._v(" 5-2、Hot Module Replacement")]),n("p",[t._v("在之前当代码有变化，我们使用的 live reload，也就是刷新整个页面，虽然这样为我们省掉了很多手动刷新页面的麻烦，但是这样即使只是修改了很小的内容，也会刷新整个页面，无法保持页面操作状态。HMR 随之就出现了，它的核心的局部（模块）更新，也就是不刷新页面，只更新变化的部分")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devServer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 生成的虚拟目录路径")]),t._v("\n  \tcontentBase"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./dist"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 自动开启浏览器")]),t._v("\n  \topen"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 端口")]),t._v("\n  \tport"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("8081")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 开启热更新")]),t._v("\n  \thot"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t"),n("span",{attrs:{class:"token comment"}},[t._v("// 即使 HMR 不生效，也不去刷新整个页面(选择开启)")]),t._v("\n    hotOnly"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \tproxy"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v("'/api'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      \ttarget"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'http://localhost:8787'")]),t._v("\n    \t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("开启 "),n("code",[t._v("HMR")]),t._v(" 以后，当代码发生变化，"),n("code",[t._v("webpack")]),t._v(" 即会进行编译，并通过 "),n("code",[t._v("websocket")]),t._v(" 通知客户端(浏览器)，我们需要监听处理来自 "),n("code",[t._v("webpack")]),t._v(" 的通知，然后通过 HMR 提供的 "),n("code",[t._v("API")]),t._v(" 来完成我们的局部更新逻辑")]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'start1!'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" fn1 "),n("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./fn1.js'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbox1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fn1"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hot"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token comment"}},[t._v("//如果开启 HMR")]),t._v("\n    module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hot"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("accept")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'./fn1.js'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 更新逻辑")]),t._v("\n      box1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" fn1"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("上面代码就是 当 "),n("code",[t._v("./fn1.js")]),t._v(" 模块代码发生变化的时候，把最新的 "),n("code",[t._v("fn1")]),t._v(" 函数绑定到 "),n("code",[t._v("box1.onclick")]),t._v(" 上")]),n("p",[t._v("从上面就可以看到，"),n("code",[t._v("HMR")]),t._v(" 其实就是以模块为单位，当模块代码发生修改的时候，通知客户端进行对应的更新，而客户端则根据具体的模块来更新我们的页面逻辑(这些逻辑需要自己去实现)，好在当前一些常用的更新逻辑都有了现成的插件")]),n("h3",{attrs:{id:"_5-3、css热更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3、css热更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 5-3、css热更新")]),n("p",[t._v("样式热更新比较简单，"),n("code",[t._v("style-loader")]),t._v(" 中就已经集成实现了，我们只需要在 "),n("code",[t._v("use")]),t._v(" 中使用就可以了")]),n("h3",{attrs:{id:"_5-4、react-热更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4、react-热更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 5-4、react 热更新")]),n("ul",[n("li",[t._v("https://github.com/gaearon/react-hot-loader")]),n("li",[t._v("react 脚手架中也有集成")])]),n("h3",{attrs:{id:"vue-热更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-热更新","aria-hidden":"true"}},[t._v("#")]),t._v(" vue 热更新")]),n("ul",[n("li",[t._v("https://github.com/vuejs/vue-loader")]),n("li",[t._v("vue 脚手架中也有集成")])]),n("h2",{attrs:{id:"_6、直播课件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、直播课件","aria-hidden":"true"}},[t._v("#")]),t._v(" 6、直播课件")]),n("p",[t._v("https://note.youdao.com/web/#/file/WEB83602a49073fe650870661a0cd9fffe7/markdown/WEB59279a586d590c0084c2c5853b042dcd/")]),n("h2",{attrs:{id:"_7、练习"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、练习","aria-hidden":"true"}},[t._v("#")]),t._v(" 7、练习")]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\n1、使用 devServer 配置一个 webserver （端口不限）。 \n2、使用 HtmlWebpackPlugin 插件构建 HTML，并在模板html页面中添加一个按钮。 \n3、使用 mini-css-extract-plugin 插件提取 css 到单独的文件中。 \n4、在入口文件中通过js获取页面中的按钮并绑定click事件函数，当按钮被点击的时候通过console.log("开课吧-${你的名字}")，其中${你的名字}对应你的真实姓名。\n')])])])])}],o=a(1),e=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);s.default=e.exports}}]);